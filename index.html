
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å¿ƒæƒ…å°å¡</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f0f4f8; }
    #moodCard { 
      margin-top: 20px; 
      border-radius: 10px; 
      padding: 20px; 
      max-width: 320px; 
      color: #fff; 
      display: none;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    #downloadBtn { margin-top: 15px; }
    /* èƒŒæ™¯é¡è‰²æ ¹æ“šå¿ƒæƒ… */
    #moodCard.é–‹å¿ƒ { background: #4CAF50; }
    #moodCard.ç„¦æ…® { background: #FF9800; }
    #moodCard.ç–²æ†Š { background: #9E9E9E; }
    #moodCard.æ²®å–ª { background: #F44336; }
  </style>
</head>
<body>

<h1>å¿ƒæƒ…å°å¡</h1>

<label for="emailInput">Emailï¼ˆæ¨¡æ“¬ç™»å…¥ï¼‰:</label><br />
<input type="email" id="emailInput" placeholder="example@gmail.com" style="width:250px;" /><br /><br />

<label for="moodSelect">é¸æ“‡å¿ƒæƒ…ï¼š</label><br />
<select id="moodSelect" style="width:150px;">
  <option value="é–‹å¿ƒ">é–‹å¿ƒ</option>
  <option value="ç„¦æ…®">ç„¦æ…®</option>
  <option value="ç–²æ†Š">ç–²æ†Š</option>
  <option value="æ²®å–ª">æ²®å–ª</option>
</select><br /><br />

<button id="generateBtn">ç”¢ç”Ÿå¿ƒæƒ…å¡ç‰‡</button>

<div id="moodCard">
  <div id="moodText" style="font-size: 24px; font-weight: bold;"></div>
  <pre id="moodDesc" style="white-space: pre-wrap; font-size: 16px; margin-top:10px;"></pre>
</div>

<button id="downloadBtn" style="display:none;">ä¸‹è¼‰å°å¡åœ–ç‰‡</button>

<script>
  // æ¨¡æ“¬ç™»å…¥å¸³è™Ÿ
  let currentUser = null;

  // å¤šå¥å¿ƒæƒ…æè¿°
  const moodDescriptions = {
    "é–‹å¿ƒ": [
      "ä»Šå¤©çš„ä½ å……æ»¿é™½å…‰èˆ‡æ­£èƒ½é‡ï¼Œç¹¼çºŒä¿æŒé€™ä»½å¥½å¿ƒæƒ…å§ï¼",
      "ç¬‘å®¹æ˜¯ä½ æœ€ç¾çš„è£é£¾ï¼Œè®“å¿«æ¨‚æ„ŸæŸ“æ›´å¤šäººå§ï¼",
      "é€™ä¸–ç•Œå› ä½ è€Œæ›´ç¾å¥½ï¼Œä¿æŒé€™ä»½å…‰èŠ’ï¼"
    ],
    "ç„¦æ…®": [
      "å¯èƒ½äº‹æƒ…æœ‰é»å¤šï¼Œåˆ¥å¿˜äº†æ·±å‘¼å¸ã€å–æ¯æ°´ï¼Œæ…¢æ…¢ä¾†ã€‚",
      "æ„Ÿåˆ°ä¸å®‰æ˜¯æ­£å¸¸çš„ï¼Œè«‹çµ¦è‡ªå·±ä¸€é»ç©ºé–“ã€‚",
      "å³ä½¿ç¾åœ¨å¿ƒäº‚å¦‚éº»ï¼Œä½ ä¾ç„¶å€¼å¾—æº«æŸ”ä»¥å¾…ã€‚"
    ],
    "ç–²æ†Š": [
      "è¾›è‹¦äº†ï¼Œé©æ™‚æ”¾é¬†æ˜¯å°è‡ªå·±çš„æ„›è­·ã€‚",
      "ç´¯äº†å°±å¥½å¥½ä¼‘æ¯ï¼Œæ˜å¤©æœƒæ›´å¥½ã€‚",
      "çµ¦è‡ªå·±å……é›»çš„æ™‚é–“ï¼Œä¸è¦å¤ªè‹›æ±‚è‡ªå·±ã€‚"
    ],
    "æ²®å–ª": [
      "é»‘æš—éå¾Œï¼Œé™½å…‰ç¸½æœƒä¾†è‡¨ã€‚",
      "å¤±è½æ˜¯æš«æ™‚çš„ï¼Œè«‹ç›¸ä¿¡è‡ªå·±çš„åŠ›é‡ã€‚",
      "å…è¨±è‡ªå·±é›£éï¼Œä½†åˆ¥æ”¾æ£„å¸Œæœ›ã€‚"
    ]
  };

  // Emoji å°æ‡‰
  const moodEmojis = {
    "é–‹å¿ƒ": "ğŸ˜Š",
    "ç„¦æ…®": "ğŸ˜°",
    "ç–²æ†Š": "ğŸ˜©",
    "æ²®å–ª": "ğŸ˜"
  };

  const emailInput = document.getElementById('emailInput');
  const moodSelect = document.getElementById('moodSelect');
  const generateBtn = document.getElementById('generateBtn');
  const moodCard = document.getElementById('moodCard');
  const moodText = document.getElementById('moodText');
  const moodDesc = document.getElementById('moodDesc');
  const downloadBtn = document.getElementById('downloadBtn');

  function generateCard() {
    currentUser = emailInput.value.trim() || null;
    const mood = moodSelect.value;
    const date = new Date().toLocaleDateString();

    // éš¨æ©ŸæŒ‘ä¸€å¥æè¿°
    const messages = moodDescriptions[mood];
    const randomMessage = messages[Math.floor(Math.random() * messages.length)];

    const emoji = moodEmojis[mood];
    const userText = currentUser ? `ğŸ‘¤ ä½¿ç”¨è€…ï¼š${currentUser}` : 'ğŸ‘¤ å°šæœªç™»å…¥';

    // é¡¯ç¤ºå¡ç‰‡å…§å®¹
    moodText.innerText = `${emoji} å¿ƒæƒ…ï¼š${mood}`;
    moodDesc.innerText = `${randomMessage}\n\n${userText}\nğŸ“… æ—¥æœŸï¼š${date}`;

    // è¨­å®šå¡ç‰‡èƒŒæ™¯è‰²ï¼ˆclassï¼‰
    moodCard.className = '';
    moodCard.classList.add(mood);
    moodCard.style.display = 'block';

    downloadBtn.style.display = 'inline-block';
  }

  function downloadCard() {
    // å»ºç«‹ canvasï¼Œå°‡å¡ç‰‡å…§å®¹ç•«ä¸Šå»
    const canvas = document.createElement('canvas');
    canvas.width = 400;
    canvas.height = 300;
    const ctx = canvas.getContext('2d');

    // èƒŒæ™¯é¡è‰²ä¾å¿ƒæƒ…æ”¹è®Š
    const bgColors = {
      "é–‹å¿ƒ": "#4CAF50",
      "ç„¦æ…®": "#FF9800",
      "ç–²æ†Š": "#9E9E9E",
      "æ²®å–ª": "#F44336"
    };
    const mood = moodSelect.value;
    ctx.fillStyle = bgColors[mood] || '#333';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // æ–‡å­—è¨­å®š
    ctx.fillStyle = '#fff';
    ctx.font = '28px sans-serif';
    ctx.fillText(moodText.innerText, 20, 60);

    ctx.font = '18px sans-serif';
    const lines = moodDesc.innerText.split('\n');
    for (let i = 0; i < lines.length; i++) {
      ctx.fillText(lines[i], 20, 100 + i * 30);
    }

    // ç”¢ç”Ÿä¸‹è¼‰é€£çµ
    const link = document.createElement('a');
    link.download = `å¿ƒæƒ…å°å¡_${mood}_${new Date().toISOString().slice(0,10)}.png`;
    link.href = canvas.toDataURL('image/png');
    link.click();
  }

  generateBtn.addEventListener('click', generateCard);
  downloadBtn.addEventListener('click', downloadCard);
</script>

</body>
</html>

    updateHistory();
    updateChart();
  </script>
</body>
</html>
